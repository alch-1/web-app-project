<!DOCTYPE html>
<html lang="en">

<head>
    <title>Request Gig</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
    <link rel="stylesheet" type="text/css" href="home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.js"></script>
    <script type="text/javascript" src="app.js"></script>
    <script type="text/javascript" src="requestGig.js"></script>
    <!-- Redirect Logic -->
    <script>
      if (localStorage.getItem("username") == null) {
        window.location.href = "./home.html"
      }
    </script>
</head>

<body>
    <div>
        <div id="navbar-main">
            <navbar-container :user-Name="userName" :biz-owner="bizOwner" :current-page="currentPage" :url="url"/>
        </div>
        <div class="container-fluid px-0 pt-5 sub-header temp">
            <div class="jumbotron text-center sub-header temp">
                <h1>Request Gig</h1>
            </div>
        </div>
        <div class="container-fluid req-gig pt-2 pb-5">
            <div class="container form-container">
                <form>
                    <div class="form-group text-center">
                        <h4>Please fill in the following fields</h4>
                    </div>
                    <div class="form-group my-n3  ">
                        <label for="title">Title</label>
                        <input type="text" class="form-control" id="title" placeholder="Title of your gig">
                    </div>
                    <div class="form-group my-n3">
                        <label for="location">Location</label>
                        <input type="text" class="form-control" id="location" placeholder="Where is your gig?">
                    </div>
                    <div class="form-group my-n3 ">
                        <label for="postalCode">Postal Code</label>
                        <input type="text" class="form-control" id="postalCode" placeholder="eg. S123456">
                    </div>
                    <div class="form-group my-n3">
                        <label for="genre">Genre</label>
                        <select class="form-control" id="genre">
                <option selected disabled hidden>Choose genre</option>
                <option>Rock</option>
                <option>Blues</option>
                <option>Folk</option>
                <option>Pop</option>
                <option>Metal</option>
                <option>Classical</option>
                <option>Country</option>
                <option>Jazz</option>
                <option>Funk</option>
            </select>
                    </div>
                    <div class="form-group my-n3 ">
                        <label for="songs">Songs (optional)</label>
                        <div class="form-row">
                            <div class="col-8">
                                <input type="text" class="form-control" id="songs" placeholder="Song name">
                            </div>
                            <div class="col">
                                <button id="songBtn" type="button" class="btn btn-primary" onclick="addSong()">Add song</button>
                            </div>
                        </div>
                        <div class="container-fluid pl-0">
                            <ul class="list-group col-6 pt-2" id="songList">
                            </ul>
                        </div>
                    </div>
                    <div class="form-group my-n3">
                        <label for="budget">Budget</label>
                        <div class="input-group mb-2">
                            <div class="input-group-prepend">
                                <div class="input-group-text">$</div>
                            </div>
                            <input type="number" min="0" class="form-control col-3" id="budget" placeholder="What is your budget?">
                        </div>
                    </div>
                    <div class="form-group my-n3 ">
                        <label for="date">Starting DateTime</label>
                        <input type="datetime-local" class="form-control col-3" id="date">
                    </div>
                    <div class="form-group my-n3">
                        <label for="duration">Duration</label>
                        <div class="input-group mb-2">
                            <input type="number" class="form-control col-3" id="duration">
                            <div class="input-group-append">
                                <div class="input-group-text">hours</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group my-n3 ">
                        <label for="numMusicians">Maximum Number of Musicians</label>
                        <input type="number" min="0" class="form-control" id="noMusicians" placeholder="The maximum number of musicians you can accomodate (put 0 for no limit)">
                    </div>
                    <div class="form-group my-n3">
                        <label for="description">Description</label>
                        <textarea rows="5" class="form-control" id="description" placeholder="Describe your gig and include other remarks"></textarea>
                    </div>
                    <div class="form-group my-n3 ">
                        <label for="description">Banner Image Upload (Max 2mb)</label>
                        <input id="image" name="image" type="file" accept="image/*" class="file form-control" data-show-preview="false">
                    </div>
                    <div class="form-group mt-4">
                        <button type="button" id="submitButton" class="btn btn-primary" onclick="checkForm()">Request Gig</button>
                    </div>
                </form>
            </div>
        </div>
        <footer class="text-right">
            <div class="pr-4">
              Gig-E Pte Ltd.<br>
            </div>
            <a href="#" class="fa fa-facebook"></a>
            <a href="#" class="fa fa-twitter"></a>
            <a href="#" class="fa fa-instagram"></a>
        </footer>
        <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <script>
            var vm = new Vue({
                el: "#navbar-main",
                data: {
                    userName: "zxc12123c",
                    bizOwner: false,
                    currentPage: "requestGig",
                    url:"",
                },
                created: function() {
                    // call api here to find props
                    var username = localStorage.getItem("username");
                    var userType = localStorage.getItem("userType");
                    this.userName = username;
                    this.bizOwner = userType == "seeker" ? true : false;
                    var url = "../backend/api/band/getBandByUsername.php";
                    axios
                      .get(url, {
                        params: {
                          "username": localStorage.getItem("username"),
                        },
                      })
                      .then((response) => {
                        console.log(response.data.bands[0].bandName);
                        this.url = `./profile.html?bandName=${response.data.bands[0].bandName}`;
                      })
                      .catch((error) => {
                        console.log("There was an error: " + error.message);
                      });
                },
            });
        </script>
</body>

</html>